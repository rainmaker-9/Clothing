{% extends "layout.html" %}
{% block title %}Login{% endblock %}
{% block head %}
{{ super() }}
<style>
  .carousel-inner img {
    max-height: 800px;
    object-fit: cover;
  }
</style>
{% endblock %}
{% block content %}
<div class="container py-3 py-md-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5 col-xl-4 col-xxl-3">
      <form id="frmLogin">
        <div class="row g-3">
          <div class="col-12">
            <h2>Login</h2>
          </div>
          <div class="col-12">
            <div class="form-floating">
              <input type="email" class="form-control" id="email-address" name="email" placeholder="name@example.com"
                required />
              <label for="email-address">Email address</label>
            </div>
          </div>
          <div class="col-12">
            <div class="form-floating">
              <input type="password" class="form-control" id="password" name="password" placeholder="Enter Password"
                required />
              <label for="password">Password</label>
            </div>
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-success btn-lg rounded-1"><i
                class="fa-solid fa-sign-in-alt me-2"></i>Login</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
  const frmLogin = document.querySelector('#frmLogin')
  if (frmLogin) {
    frmLogin.addEventListener('submit', (e) => {
      e.preventDefault();
      const data = new FormData(e.target)
      fetch('/login', { method: "POST", body: data }).then(response => {
        if (!response.ok) throw new Error(response.statusText)
        response.json().then(result => {
          if (result.status) {
            location.reload()
          }
        })
      })
    })
  }
</script>
{% endblock %}